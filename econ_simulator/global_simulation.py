"""Simulation utilities for global policy impact."""

from typing import Dict
from datetime import date

from .simulation import PolicyInputs, simulate_economy

# The simulation begins on this date
START_DATE = date(2025, 1, 1)

# Baseline GDP values by country for the year 2019 (in billions of USD)
_GDP_2019 = {
    "ABW": 3.4,
    "AFG": 18.8,
    "AGO": 70.9,
    "ALB": 15.59,
    "AND": 3.16,
    "ARE": 417.99,
    "ARG": 447.75,
    "ARM": 13.62,
    "ASM": 0.65,
    "ATG": 1.73,
    "AUS": 1392.72,
    "AUT": 442.98,
    "AZE": 48.17,
    "BDI": 2.58,
    "BEL": 536.73,
    "BEN": 14.39,
    "BFA": 16.03,
    "BGD": 351.23,
    "BGR": 68.63,
    "BHR": 40.45,
    "BHS": 13.02,
    "BIH": 20.48,
    "BLR": 64.41,
    "BLZ": 2.39,
    "BMU": 7.42,
    "BOL": 40.9,
    "BRA": 1873.29,
    "BRB": 5.79,
    "BRN": 13.47,
    "BTN": 2.74,
    "BWA": 16.73,
    "CAF": 2.22,
    "CAN": 1743.73,
    "CHE": 721.37,
    "CHI": 10.03,
    "CHL": 278.29,
    "CHN": 14279.97,
    "CIV": 60.38,
    "CMR": 39.67,
    "COD": 51.78,
    "COG": 13.98,
    "COL": 323.03,
    "COM": 1.2,
    "CPV": 2.25,
    "CRI": 64.42,
    "CUB": 103.43,
    "CUW": 3.03,
    "CYM": 5.94,
    "CYP": 26.2,
    "CZE": 256.79,
    "DEU": 3957.21,
    "DJI": 3.09,
    "DMA": 0.61,
    "DNK": 345.4,
    "DOM": 88.94,
    "DZA": 193.46,
    "ECU": 107.6,
    "EGY": 318.68,
    "ESP": 1403.5,
    "EST": 31.87,
    "ETH": 95.91,
    "FIN": 267.01,
    "FJI": 5.44,
    "FRA": 2722.79,
    "FRO": 3.27,
    "FSM": 0.39,
    "GAB": 16.87,
    "GBR": 2851.41,
    "GEO": 17.64,
    "GHA": 68.34,
    "GIN": 13.44,
    "GMB": 1.81,
    "GNB": 1.59,
    "GNQ": 11.36,
    "GRC": 207.31,
    "GRD": 1.21,
    "GRL": 3.0,
    "GTM": 77.17,
    "GUM": 6.36,
    "GUY": 5.17,
    "HKG": 363.07,
    "HND": 24.88,
    "HRV": 61.47,
    "HTI": 15.02,
    "HUN": 164.02,
    "IDN": 1119.1,
    "IMN": 7.31,
    "IND": 2835.61,
    "IRL": 407.12,
    "IRN": 333.52,
    "IRQ": 233.64,
    "ISL": 24.68,
    "ISR": 399.65,
    "ITA": 2019.61,
    "JAM": 15.83,
    "JOR": 44.5,
    "JPN": 5117.99,
    "KAZ": 181.67,
    "KEN": 100.38,
    "KGZ": 9.37,
    "KHM": 36.69,
    "KIR": 0.22,
    "KNA": 1.11,
    "KOR": 1651.42,
    "KWT": 140.86,
    "LAO": 18.74,
    "LBN": 51.61,
    "LBR": 3.32,
    "LBY": 69.25,
    "LCA": 2.1,
    "LIE": 6.44,
    "LKA": 89.01,
    "LSO": 2.39,
    "LTU": 55.12,
    "LUX": 69.89,
    "LVA": 33.1,
    "MAC": 55.08,
    "MAF": 0.65,
    "MAR": 128.92,
    "MCO": 7.38,
    "MDA": 11.74,
    "MDG": 14.1,
    "MDV": 5.73,
    "MEX": 1304.11,
    "MHL": 0.23,
    "MKD": 12.61,
    "MLI": 17.28,
    "MLT": 16.34,
    "MMR": 75.07,
    "MNE": 5.54,
    "MNG": 14.21,
    "MNP": 1.18,
    "MOZ": 15.51,
    "MRT": 7.89,
    "MUS": 14.44,
    "MWI": 11.05,
    "MYS": 365.18,
    "NAM": 12.54,
    "NCL": 9.48,
    "NER": 12.89,
    "NGA": 474.52,
    "NIC": 12.7,
    "NLD": 928.9,
    "NOR": 408.74,
    "NPL": 34.19,
    "NRU": 0.12,
    "NZL": 212.85,
    "OMN": 88.06,
    "PAK": 320.91,
    "PAN": 69.78,
    "PER": 228.35,
    "PHL": 376.82,
    "PLW": 0.28,
    "PNG": 24.75,
    "POL": 602.68,
    "PRI": 105.13,
    "PRT": 240.12,
    "PRY": 37.93,
    "PSE": 17.13,
    "PYF": 6.02,
    "QAT": 176.37,
    "ROU": 251.68,
    "RUS": 1693.12,
    "RWA": 10.35,
    "SAU": 838.56,
    "SDN": 32.34,
    "SEN": 23.4,
    "SGP": 376.9,
    "SLB": 1.62,
    "SLE": 6.52,
    "SLV": 26.88,
    "SMR": 1.62,
    "SOM": 8.66,
    "SRB": 53.86,
    "STP": 0.41,
    "SUR": 4.02,
    "SVK": 105.84,
    "SVN": 53.91,
    "SWE": 532.17,
    "SWZ": 4.59,
    "SXM": 1.41,
    "SYC": 1.87,
    "SYR": 22.58,
    "TCA": 1.18,
    "TCD": 11.31,
    "TGO": 6.99,
    "THA": 543.98,
    "TJK": 8.3,
    "TKM": 45.23,
    "TLS": 2.03,
    "TON": 0.49,
    "TTO": 23.78,
    "TUN": 41.91,
    "TUR": 761.01,
    "TUV": 0.05,
    "TZA": 61.03,
    "UGA": 35.35,
    "UKR": 153.88,
    "URY": 62.22,
    "USA": 21539.98,
    "UZB": 67.29,
    "VCT": 0.91,
    "VIR": 4.12,
    "VNM": 334.37,
    "VUT": 0.94,
    "WSM": 0.91,
    "XKX": 7.9,
    "ZAF": 389.33,
    "ZMB": 23.31,
    "ZWE": 25.72,
}

# Approximate global growth factors for 2020-2024
_COVID_RECOVERY_FACTORS = [0.97, 1.05, 1.03, 1.025, 1.023]
_RECOVERY_MULTIPLIER = 1.0
for _factor in _COVID_RECOVERY_FACTORS:
    _RECOVERY_MULTIPLIER *= _factor

GLOBAL_BASE_GDP = {
    code: gdp * _RECOVERY_MULTIPLIER for code, gdp in _GDP_2019.items()
}


def simulate_global(policies: PolicyInputs, years: int = 1) -> Dict[str, float]:
    """Simulate GDP outcomes for several major economies."""
    results: Dict[str, float] = {}
    for code, gdp in GLOBAL_BASE_GDP.items():
        result = simulate_economy(gdp, policies, years=years)
        results[code] = result.gdp_history[-1]
    return results
